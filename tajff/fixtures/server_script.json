[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-03-19 08:27:15.591908",
  "module": null,
  "name": "Purchase Order - After  Submit",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Purchase Order",
  "script": "# Create Payment Entry \nfrappe.get_doc(dict(\n\t\tdoctype = 'Payment Entry',\n\t\tmode_of_payment = 'Bank Riyad',\n\t\tpayment_type = 'Pay',\n\t\tparty_type = 'Supplier',\n\t\tparty = doc.supplier,\n\t\tpaid_from = '1102050001 - 1212246979940 - Riyad Bank - Taj',\n\t\tpaid_from_account_currency = 'SAR',\n\t\tpaid_to = '2202010001 - Suppliers - تاج',\n\t\tpaid_to_account_currency = 'SAR',\n\t\tsource_exchange_rate = 1,\n\t\ttarget_exchange_rate = 1,\n\t\tpaid_amount = doc.grand_total,\n\t\treceived_amount = doc.grand_total,\n\t\treference_no = 1,\n\t\treference_date = \"20240101\",\n\t\treferences = [{\n                \"doctype\": \"Payment Entry Reference\",\n                \"reference_doctype\": \"Purchase Order\",\n                \"total_amount\" : doc.grand_total,\n                \"outstanding_amount\" : doc.grand_total,\n                \"allocated_amount\": doc.grand_total,\n                \"reference_name\": doc.name,\n                \"exchange_rate\": 1\n        }]\n\t)).insert()\t",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Cancel",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-18 11:07:46.621760",
  "module": null,
  "name": "Exoense Claim Unpaid",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Payment Entry",
  "script": "for reference in doc.references:\r\n\tif reference.reference_doctype == \"Expense Claim\":\r\n\t\texpense_claim = frappe.get_doc(\"Expense Claim\", reference.reference_name)\r\n\t\texpense_claim.workflow_state = \"Unpaid\"\r\n\t\texpense_claim.save()",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-18 11:07:46.260010",
  "module": null,
  "name": "Expenses Claim - Paid",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Payment Entry",
  "script": "for reference in doc.references:\r\n\tif reference.reference_doctype == \"Expense Claim\":\r\n\t\texpense_claim = frappe.get_doc(\"Expense Claim\", reference.reference_name)\r\n\t\tif expense_claim.total_sanctioned_amount == expense_claim.total_amount_reimbursed:\r\n\t\t    expense_claim.workflow_state = \"Paid\"\r\n\t\t    expense_claim.save()",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-11-19 09:18:52.404223",
  "module": null,
  "name": "MR",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "# Collect the amount of similar items\r\nitem_qty = {}\r\nitems_to_delete = []\r\n\r\nfor item in doc.items:\r\n    item_code = item.item_code\r\n    \r\n    if item_code in item_qty:\r\n        item_qty[item_code] = item_qty[item_code] + item.qty\r\n        items_to_delete.append(item)\r\n    else:\r\n        item_qty[item_code] = item.qty\r\n\r\nfor item in items_to_delete:\r\n    doc.items.remove(item)\r\n\r\nfor item_code, qty in item_qty.items():\r\n    for item in doc.items:\r\n        if item.item_code == item_code:\r\n            item.qty = qty\r\n            break",
  "script_type": "DocType Event"
 }
]